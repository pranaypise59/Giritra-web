function DTWishlist(){const LOCAL_STORAGE_WISHLIST_KEY="shopify-wishlist",LOCAL_STORAGE_DELIMITER=",",BUTTON_ACTIVE_CLASS="added",GRID_LOADED_CLASS="loaded",LOADING_STATUS="adding",selectors={button:"[button-wishlist]",button_main:"[button-wishlist-main]",grid:"[grid-wishlist]",productCard:".wishlist__grid-item"};document.addEventListener("DOMContentLoaded",()=>{initButtons(),initGrid()}),document.addEventListener("shopify-wishlist:updated",event=>{initGrid()});const fetchProductCardHTML=async handle=>{const productTileTemplateUrl=`/products/${handle}?view=card`;try{const text=await(await fetch(productTileTemplateUrl)).text();return new DOMParser().parseFromString(text,"text/html").documentElement.querySelector(selectors.productCard).outerHTML}catch(err){return console.error(`[Shopify Wishlist] Failed to load content for handle: ${handle}`,err),""}},setupGrid=async grid=>{const wishlist=getWishlist(),requests=wishlist.map(fetchProductCardHTML),wishlistProductCards=(await Promise.all(requests)).join("");grid.innerHTML=wishlistProductCards,grid.classList.add(GRID_LOADED_CLASS),initButtons();const event=new CustomEvent("shopify-wishlist:init-product-grid",{detail:{wishlist}});document.dispatchEvent(event)},setupButtons=buttons=>{buttons.forEach(button=>{const productHandle=button.dataset.productHandle||!1;if(!productHandle)return console.error("[Shopify Wishlist] Missing `data-product-handle` attribute. Failed to update the wishlist.");wishlistContains(productHandle)&&button.classList.add(BUTTON_ACTIVE_CLASS),button.addEventListener("click",()=>{button.classList.add(LOADING_STATUS),updateWishlist(productHandle),setTimeout(()=>{button.classList.remove(LOADING_STATUS),button.classList.toggle(BUTTON_ACTIVE_CLASS)},1e3)})})},initGrid=()=>{const grid=document.querySelector(selectors.grid)||!1;grid&&setupGrid(grid),wishListCount()},initButtons=()=>{const buttons=document.querySelectorAll(selectors.button)||[];if(buttons.length)setupButtons(buttons);else return;const button_main=document.querySelectorAll(selectors.button_main)||[];if(button_main.length)setupButtons(button_main);else return;const event=new CustomEvent("shopify-wishlist:init-buttons",{detail:{wishlist:getWishlist()}});document.dispatchEvent(event)},getWishlist=()=>{const wishlist=localStorage.getItem(LOCAL_STORAGE_WISHLIST_KEY)||!1;return wishlist?wishlist.split(LOCAL_STORAGE_DELIMITER):[]},setWishlist=array=>{const wishlist=array.join(LOCAL_STORAGE_DELIMITER);array.length?localStorage.setItem(LOCAL_STORAGE_WISHLIST_KEY,wishlist):localStorage.removeItem(LOCAL_STORAGE_WISHLIST_KEY);const event=new CustomEvent("shopify-wishlist:updated",{detail:{wishlist:array}});return document.dispatchEvent(event),wishlist},updateWishlist=handle=>{const wishlist=getWishlist(),indexInWishlist=wishlist.indexOf(handle);let count=0;indexInWishlist===-1?(wishlist.push(handle),count=1):(wishlist.splice(indexInWishlist,1),count=-1),setWishlist(wishlist),wishListCount()},wishlistContains=handle=>getWishlist().includes(handle),resetWishlist=()=>setWishlist([]),wishListCount=()=>{const currentCount=getWishlist().length,wishCountBubble=document.querySelector(".dtxc-wishlist-count"),wishBubble=document.getElementById("dtxc-wishlistBubble"),wishlistGrid=document.querySelector(".wishlist__grid"),emptytxt=document.querySelector(".wishlist-page-continue-btn");if(!wishCountBubble||!wishBubble)return;if(wishCountBubble.setAttribute("count",currentCount),wishBubble.querySelector("span").textContent=currentCount,currentCount===0)if(wishCountBubble.style.display="none",emptytxt)emptytxt.classList.add("list_empty");else return;else if(wishCountBubble.style.display="block",!emptytxt)emptytxt.classList.remove("list_empty");else return;var wishlistBubble=document.getElementById("dtxc-wishlistBubble"),footerHeart=document.getElementById("footerHeart");if(!wishlistBubble||!footerHeart)return;footerHeart.innerHTML="";const clone=wishlistBubble.cloneNode(!0);footerHeart.appendChild(clone)};initButtons(),initGrid()}document.addEventListener("DOMContentLoaded",()=>{DTWishlist()});
//# sourceMappingURL=/cdn/shop/t/8/assets/wishlist.js.map?v=107358256330186171741737632962
